package wijtse.model.game;

import javafx.application.Platform;
import javafx.stage.Stage;
import wijtse.controller.NeuronSnake;
import wijtse.model.brain.standard.Brain;
import wijtse.view.StandardBrainView;

import java.util.ArrayList;

/**
 * Created by wijtse on 17-11-16.
 */
public class Snake {

    //Cool snakes:
    //[-0.9953821245438537, -1.39908452607511, -0.8709385339898326, 2.712431391514327, 2.6815154097288056, 0.022486794603214122, -2.725273505832731, 1.7234668127092911, 1.9292987068818235, 1.296337724492246, -0.510845452862136, 2.1686439346970854, -0.37626191535049536, 2.336511755116633, 0.35510408055752407, 1.6140365485524946, 3.7541647936489992, -0.9532499423944927, -0.14721089588005754, 3.981694130680527, 3.4473569895508716, 3.073992175416544, 2.009606634389315, -2.4088884066194645, -3.149082114999893, -1.5962827566568025, -3.2862901865466254, 0.8269468030840565, -3.9044700848393354, -1.3944381103945744, -0.772205256635357, -2.5642465115326534, 1.5486418384746719, 0.19866540401128585, 2.951078952978417, 3.7361417432583828, -3.3770400277650525, 2.2945516571728177, 3.4634620042795277, -2.89301813116919, 3.2761936360646233, -0.23995246755020894, -3.143615386755952, 2.9038436798495644, -1.106402811842055, -3.2227682674837617, -1.5753359470594708, -1.5626924778601312, 2.7075596855686133, -2.17932545918302, -3.5469504849659934, -0.41616840139307865, -3.65470725298791, -2.276895002818656, 0.1519322848526743, 1.796142668481422, -3.543182416374102, -0.42084594613392756, -3.6822856282793825, -3.7268864864859514, -2.5126358750396784, -3.8077427324233035, -2.5092001371624857, 1.3183618343883303, 3.187604955417534, 2.443599683973453, -2.056921944011351, -1.9423297630691714, -3.2827105816716395, 1.9049780116477386, 1.771031169172021, -0.7664282611784312, 0.4009741376064513, -3.1741617807760667, 0.7525092388374333, 0.017956968897640202, -0.11417346803757411, 0.4513992087389216, 0.3700568672900477, -2.9793896468264016, 3.118314040489028, -2.624437441209958, -1.5637534823384165, 2.199754537504263, 0.5902253870238852, -0.0871660983781597, 1.0381582557595053, -2.9820265354868596, -0.028292843708121573, 3.2931068146864604, 3.3919823978371326, -0.4141106398631784, -3.3860601221733724, 3.320532294959749, -3.25909798046112, 1.1482423690672912, 0.6376626050841665, 0.47417035631134663, -0.5236345448114763, -3.4967854195617223, 2.4200681743738253, -3.659699435037231, -0.8699488747832902, -0.8352826624465512, 2.6044360662036015, -0.23458558944317787, 0.8946392866392436, 2.4263440657371724, 2.676452948519854, -2.126970660025953, 3.1607960898203107, -2.3408934695991332, -2.01331357336801, 2.0055437290835156, 2.395882722348702, 2.9123645398781823, 3.5272728758842398, -3.148108200699185, 1.0791322813289943, 1.5390334954902087, -1.8588229948923365, 3.3614986915548526, -2.123740478001576, 1.4503228980693095, -3.2521746654683765, -1.4899769847386102, 3.9152506100846383, -1.3012692290207433, -0.5453994198695549, -1.905028251289428, 3.0286132065098466, 1.026231806764753, -0.4858319528620205, 2.4986450966980325, 1.5131890482263382, 2.9814270611840383, 0.3284702908285171, 3.3219139910219537, 1.6262058175185654, 3.026433112499058, 0.03484489106011246, -0.8636534029737426, -2.7287334790663804, 1.7146826307478502, -1.1018938283062196, -3.3566363437396163, 3.238869135946455, 0.6638567719478523, 0.45186246195070723, 3.5289954417203564, -2.8915401001955434, 1.450286317402595, 3.448576445207747, 3.7798196017845447, 1.9728413214030844, -0.45264371856865004, -2.5658650882731093, 1.1677121356871911, 1.1330513602474293, 3.1428334154142066, 3.9857045984346504, 2.6421151095787767, -1.199077444836404, -1.9916841358111457, -2.5810488474430597, 1.7274065357649597, -2.9250801242252154, -0.5489962489310516, -0.9771314308082308, 3.5893014683781708, 0.9466796002045132, -2.741618439791364, 1.4014316310483554, 2.422455339975067, 1.3112960676224352, 1.630899005965735, 3.1580167152940213, -2.298564363269249, 1.4742592188714063, -3.638976175325922, 1.5132107105364314, 3.9569700576924225, -2.494349507274288, -0.42505294564622087, 0.9097449662592085, 1.7000521911911504, -2.2969954846087957, 0.5945683568893845, 1.5632850991510923, 2.9880881649013276, -0.04188572983883798, 0.6144411442898381, 1.6827900309663741, -3.1473276126883194, 2.135746737792539, -1.8534827797844446, 2.6860169251837283, -0.8899431513984313, -3.5102623387207306, -2.374745625233552, -2.999723192874388, -2.501588254503429, -2.903971920993378, -2.4799668440794367, -3.1118956601956356, -0.7910472347387056, 1.6824231164609689, -3.067869529295324, -3.520193993828979, 0.9125344126307633, -1.80188435426553, -0.9661311846188338, -0.6402972387824146, 0.7163804785841617, 1.3074436427257812, 2.349703935508348, 2.3629641993389745, 1.7163607261181344, 1.559697613721081, 2.648831199595488, -1.0520092039407425, 0.4313640861937671, -3.2170226822777064, 3.2511747915790794, 1.6232964422179803, -2.69640670808234, 3.6718943724597226, -0.7703355301442611, -3.4418888972984254, -3.679281160435666, 1.8435534492177696, 1.1133079852852612, 3.3199823684458716, 1.2696576331291993, 1.320884221102542, 1.014718056196874, 1.4715801538695201, 2.8091428868296786, 2.3887509380760434, 1.793393541447304, 2.8147705131141363, -2.855426836780288, -2.118491402514124, -1.1641540663221912, -2.524861272831708, 2.5817445192865307, -3.3171452756546334, 1.8278810264292504, -2.550934691674457, -2.169422034533678, 2.8119261440228183, 1.5980522017055785, -3.215550860034133, -0.06482559118187492, 0.32909483156789676]
    //[-0.9953821245438537, 1.0311577327472152, -0.8709385339898326, 2.712431391514327, 1.4211358786245265, -1.4769475126701117, 0.21224102638438325, 1.7234668127092911, 1.9292987068818235, 1.296337724492246, -0.510845452862136, 2.1686439346970854, -3.727935749432948, 2.336511755116633, 3.550270017116701, 3.372356702827104, 3.7541647936489992, 0.288435756157722, -2.046249621558246, 1.0667600366305843, -2.3370280437427864, -2.052713147742457, 2.009606634389315, 0.10195738394176157, -3.076333649842211, -1.5962827566568025, -0.15833575100186614, 1.4918028338090004, -1.5790390060145558, 2.9449573347134574, 3.8701974540739315, -0.7811922195905732, 2.9072121381843052, -2.0787787228922268, 2.699432039186175, 3.7361417432583828, -2.7797719022276777, 0.25726676149206895, 0.5183908537284685, -2.89301813116919, 3.2761936360646233, -3.2998984061957337, -3.143615386755952, 2.9038436798495644, -1.106402811842055, -3.2227682674837617, -1.5753359470594708, 2.720180477613864, -3.364681874593983, -3.2472067727758684, -1.9951244965024788, -0.41616840139307865, -3.65470725298791, -2.276895002818656, 2.863524311603469, -2.9360514429850966, -3.543182416374102, -0.7554390682500003, -3.6822856282793825, -2.292142248588995, -2.5126358750396784, -2.6232191139132235, -2.5092001371624857, -1.1314275141870676, 1.8421404724876158, -3.587982984166212, -2.056921944011351, 2.7851996003882835, -3.2827105816716395, 0.0610598438660368, 1.771031169172021, -0.7664282611784312, 1.0076112141214342, -3.1741617807760667, -2.9013168334048984, 1.3925657365348938, -0.11417346803757411, 0.4513992087389216, -3.6492937261673486, -2.9793896468264016, -1.8128280230934983, -2.624437441209958, -1.5637534823384165, 2.3898160160045894, 0.4699685886116667, 0.8590057213475264, 1.0381582557595053, -2.9820265354868596, -0.37842470263046213, -3.303613760349381, 3.3919823978371326, -3.840610239342049, -3.3860601221733724, 3.320532294959749, -3.25909798046112, 2.952274419196728, 0.6376626050841665, 0.47417035631134663, -0.5236345448114763, -3.4967854195617223, 0.912353381088205, -2.6449610379583275, 0.21755673212163895, -0.20700955207909288, 1.1816408639817926, -0.23458558944317787, 0.8946392866392436, -2.8137980885477107, 2.7257596381565783, -2.901251485684768, 3.186742723064601, -2.3408934695991332, -2.4397045757895723, 2.0055437290835156, 2.395882722348702, -3.909980544338133, 0.38466676158418256, -3.148108200699185, 1.0791322813289943, -2.1555102849184165, -1.8588229948923365, 0.7760063907362431, -2.123740478001576, -1.1815322238540276, -3.2521746654683765, -1.4899769847386102, 3.9152506100846383, -3.8768193244626064, -0.5453994198695549, -2.1884019686688614, 3.0286132065098466, 1.026231806764753, -0.4858319528620205, 2.4986450966980325, 1.5131890482263382, -1.017551381740187, 0.045533632350827524, 3.3219139910219537, -3.36195685494981, -0.6776901702264855, 1.7885420832322128, -0.8636534029737426, -2.7287334790663804, 1.7146826307478502, 1.7546646585168926, -0.5702341283292851, 3.238869135946455, 0.6638567719478523, 0.45186246195070723, 3.2831820027668233, -2.8915401001955434, -2.4755760604743564, -1.9097529335393935, 3.7798196017845447, -2.7943969938953934, -2.110874653310712, -0.15846660802597956, 1.1677121356871911, 0.07401269126165921, 2.411748298764956, 3.9857045984346504, 2.6421151095787767, -1.199077444836404, 0.13256556139733444, -2.5810488474430597, 1.7274065357649597, -2.9250801242252154, -3.6287640269646353, -0.9771314308082308, 3.5893014683781708, 2.2972145521829423, -2.016265814540202, 0.4092131772973664, 3.1921413263235436, 1.4084846525426196, 1.630899005965735, 3.1580167152940213, 3.4063117245550663, 1.4742592188714063, -1.686157309056198, 0.3335442494485852, -1.0130937277600385, 0.29334438724023126, -0.42505294564622087, 0.10384270138904483, 1.7000521911911504, 2.684508963223772, -2.3308996761244325, 1.5632850991510923, 1.8130786476344891, 0.19428913865986353, 2.6367419432496693, 1.6827900309663741, -3.8024103255185624, -3.795366480033234, 0.169584751066842, -2.9993279187188753, -2.55572926927341, -3.5102623387207306, -2.374745625233552, -2.999723192874388, 3.233608918207012, 2.437094336654895, -1.5482484398492993, -3.1118956601956356, -0.7910472347387056, 1.6824231164609689, -3.067869529295324, -3.520193993828979, 0.9125344126307633, 0.4136254273680766, -0.9661311846188338, -2.289497444225212, 0.07956987354677736, 1.3074436427257812, -1.3129571097089965, 2.3629641993389745, -1.502406689362874, 0.07404741501397183, 2.648831199595488, -1.0520092039407425, -1.8528318704466198, 2.355528036225821, 3.7378902759795603, 1.6232964422179803, 3.343714737471399, 3.6718943724597226, 3.4650575055621404, 0.46727481907060575, 3.85998788632019, 2.4762856706385614, 1.1133079852852612, 3.3199823684458716, 1.2696576331291993, 1.320884221102542, 1.014718056196874, 1.7084317893833232, 2.251813851594215, -2.4921465230742754, 1.793393541447304, -2.3994156804633535, -2.855426836780288, -0.5370334652064193, -1.1641540663221912, -2.524861272831708, 2.5817445192865307, -2.162660169679044, 1.8278810264292504, -2.550934691674457, -2.169422034533678, 2.8119261440228183, 3.3951458841991586, -1.5482965187655555, 3.569972336209773, 0.32909483156789676]
    //[-2.152702489852068, 1.0678352971215999, 0.8670248150985103, 3.9635645166983, -2.7530566113595603, 3.864102834508148, -1.9151994716187222, -1.628626274213242, -3.367686669098415, 2.952882851957969, -3.5862794251910906, -1.1701898463846758, -0.7704936592702376, 3.12420353936597, 0.9866053534273131, 2.2576467726002116, 0.9863862917575181, 1.8996797851436238, 1.9610338194137507, -3.105028180538966, 0.5406933731286472, -0.09967807697737019, 3.616045043420593, -0.6584321274279619, -2.0484172949794344, -2.793335079138889, -2.482652095008726, 1.1130152253018712, -3.0265004359605054, -3.2286927234869847, -3.4642689770452213, 2.633194508421097, -3.798818285995086, 0.46718148889172895, 2.914580296914841, 1.2924379706108464, 1.682177828063888, -3.537597653263842, 3.663733086515717, 1.4075736605736475, -3.6725421772284967, -1.2335744929301065, -0.975996150138216, 0.7861343950779931, 3.9464036481842895, -1.5143381492551047, 3.767741596347329, 0.9935487246191359, 0.7901829219427379, 0.9594605128991134, -1.3191189020234457, -0.40404165291326155, 1.84873209586139, -2.2303976702657895, 0.8010321309524207, 2.8369286794298, 0.24772924149346043, -3.9543603690713365, -1.6059397114161076, -1.957130604479639, 0.9421886592004958, -2.8567941708084605, -0.213466134664416, 3.473550523666499, -3.0725310250923767, -0.5644887019542102, 3.756591397457097, -2.0781704793149887, -0.14552805454059303, -3.0289578322190396, -2.443105172813766, -1.8993078074253296, -1.408822960858675, -2.6535184292534737, -2.1896093158040584, -2.367664227045413, 0.9987286523899988, -1.7185180413226728, -3.172706297387233, 2.976369346469329, 1.1173799956980863, 2.9169335986000817, -1.8511758735315622, 2.214979122629603, -1.6185494877639837, -1.596424611852668, 1.9320027627615879, 1.9431192738550882, -0.9450535142660543, -0.10946832206579415, 2.630905409767797, 2.0020724791685147, -3.308103319335814, -0.6107967025417942, -3.116307868514915, -2.4985631799907475, -2.435380293958051, -3.786242717713, 2.4092675187521255, 3.944158245371801, -2.320714657486655, 1.735865396690091, 3.986235585177628, 1.4812335046465996, 0.1432985584749824, 1.8330719042109198, -1.0445458451415481, -0.5985022391458008, 3.166313861936241, 1.1474935020618142, -2.1336664452065, 0.3126113697228625, 2.8625065270505203, -0.9322649676983099, 0.5292267497526586, 0.6726209942153751, -1.2875160721484287, 1.7945239106201774, -2.4146787401776404, 3.5670334173792124, 1.7816141735951687, -2.8338436417116384, -0.6385554991972455, 1.7766565446982714, -1.7618427273493538, 1.7482064585461305, -1.3241736005567937, 1.4243752322237295, -3.8539784736537746, 3.0909452552633354, 2.744939481120901, 1.841326778848666, -0.24474580948647606, -2.7277710587038904, -2.151592277917908, 0.901967191486178, -0.8015640341712382, 2.0330473161164972, 3.3569501611301824, -1.513084867933478, 2.938592836293177, -2.6467876840789835, 3.506861970840143, 0.21392620054014788, 2.8726082752306246, -0.37709542180393907, 1.4480296185083041, -0.16729029507243265, 0.6869227862887106, -1.7199265194256181, 0.38654097526851583, 2.57720654467055, -3.960730682312229, 3.7753272084945104, -3.86057207377595, -1.27906731425586, -0.22727788335204568, 3.432474684245504, 1.3244631845333439, 3.7226885044375884, -2.2409435319614044, 2.787633703532479, 3.199717514181878, -2.6991164412565, 0.4272156076919158, 3.4579857530760956, 3.6704694813301604, 0.3518247163700474, -2.1505333830946407, -1.0589233816783175, 0.5090382329805214, 2.455655336758678, 2.5667176409389683, 2.4352222147499063, 3.8621212065287764, -3.267490666545802, 2.576666366134833, -2.0617392026773773, -3.3721261057665046, 2.0116179728186214, 2.5248073834621243, -0.12579254984062072, -1.5809116796536902, -2.6513275300751493, 0.7074571678129526, 1.5796740442661017, -2.4788205656151527, -0.22079541795398594, 3.595135168726734, -1.2564454658989046, 3.42681681562218, -0.7536883647102712, 1.2098049105756807, -0.15584018562049895, 2.9793384151881392, -0.3837548454471875, -1.8921125192858526, -2.807162568076267, -0.3304995199221281, -0.2001050674583844, 1.5219872647675734, 0.2772816118979131, 2.7010011282426403, -0.8752761040862698, -1.0219799853918925, -1.52930271106562, -0.8930925122920081, -2.648890645193137, -1.8745357607024644, -1.9710810103514769, 1.830345248830823, 1.7304156455577688, 3.5708305326171423, 3.9057444174410954, -3.717753196329589, 3.5647544630117007, -0.7758600937341917, -3.978215843696767, -2.5528116890383963, 2.6992762921135522, -2.062201757610576, 2.7204792350632365, 1.1791542837720232, -3.2948880302199273, 1.2245395925088927, -2.4035532506260324, 2.6560529675533147, -1.6863643318155175, -3.476416480438372, 2.8932863843448686, -2.0963161994420103, -2.2151706757304472, -3.1127507072570424, 3.4885675023087614, -0.312691969686135, -0.816809344984164, 3.558993543727027, 1.0959024495948642, 2.0478835723482547, -3.4908055162557856, 0.6270349185370696, -1.395774940163835, 1.724253463481051, -0.02061418799387127, 0.315599146443013, 3.3116993920023905, 3.839341836606475, 1.1160812366140043, -3.2421424429093877, -0.3052134200507135, -0.41219093041737054, -0.6352228888269034, -3.2446239600913795, -2.8970775426021795, -0.9714763407870866]
    //[-3.7701598014784894, -3.6148419158384515, 0.8670248150985103, 2.9638871831548856, -2.030569683312856, -3.9872787253395643, -1.4442023552738918, -3.1980606327630854, -0.9970549778536881, 2.952882851957969, -2.731692643495455, 0.918711332903352, -0.7704936592702376, 0.616014606969439, -2.677951106946879, -3.6306952118251887, 3.4351597292710396, -1.0399862298550513, -3.7085051747459916, 3.7432359503663974, 1.390804005544422, 1.0851093701781096, -0.9394550111258342, 3.953417583043464, 3.339793598971178, -0.3047966014746466, -3.8515899587827844, 1.1130152253018712, -2.7902199913622505, -0.6549433265950224, -2.584989793176735, 3.959555130392382, -1.8440278640311405, 1.2316994426013403, 2.914580296914841, -3.156248754870015, -0.23065609255770525, 3.547265682037448, 3.663733086515717, 0.76234504285779, 0.9566047974144984, -3.822098581494938, -0.975996150138216, -3.1172120402793944, -1.383718186038342, 2.829721472165314, 3.6484278487845954, 1.377203005358556, 1.147125718011461, 0.5865311977347973, -3.997942276004494, 3.616257729318864, 1.84873209586139, -2.4233938750761217, 1.7702807010370307, -1.8188419305508052, 0.83929989960955, 2.6436643806746307, -1.7927377593942229, 2.2302576874818785, 1.5650665051067678, 1.550564184115685, -3.9064702092764243, -0.3070551364156202, -1.2582143873703595, 3.1026450145163604, -2.806960438756767, -3.073492779502514, -3.5148282633437153, -3.394394057723395, -3.9602120129530043, 2.632897158857742, 1.7125859830982222, -0.45743839382464646, 2.222449340838655, -2.827518260275366, -1.6805799789900826, -1.7185180413226728, -3.440593682301216, 0.04135522169459005, 1.2542045535649198, -1.55641412413015, 0.9782697759820733, 2.214979122629603, -2.283165933419978, -1.7327691831087053, -1.121031899637793, 2.947726090740103, 2.221081556773888, 0.7328243813372337, 0.3943636129986672, -0.9797199699457417, 0.5282660367882412, -0.18816392221135114, -2.280902745618646, -2.7632281054697705, -2.4860598683563175, -3.4887240900855403, -2.178231529519776, 2.0783325440239055, 3.6821805254824964, -0.2560958430699545, -1.8569444009080636, 3.7960478640094806, -2.330857463317794, -2.0299642062626173, 3.545383706774783, -1.1888751873428838, 2.338299231030251, -3.1359697868639653, -2.800941882939078, -2.8512071254836577, -3.322769837548006, -3.6448319248160983, -3.856436901839065, 1.3408167031134646, 3.5070593446650715, -3.3926237645252275, 3.417521779846406, 1.9732398734432683, -3.2549812288427615, -2.2080429449554684, -2.949449529946091, 0.1296152324057127, 3.398361418721925, -0.3988785352353066, -3.162259362549805, 0.7619717772888155, -2.0402951669323217, 0.9390493984258343, 0.6378227301653467, -2.19014738727559, 2.129754138167357, -1.113535256446668, 1.6308254780808014, -3.550898651465724, 0.886782203864156, -3.0623057545803825, 0.2092887301637969, 3.143257939155313, 3.47033615678896, 1.333021764947369, -3.6566338697453995, 0.3696350662866754, 2.8726082752306246, -0.37709542180393907, 1.4480296185083041, 2.8149857027624217, 0.6869227862887106, 1.4635556830868666, 3.4096064978852088, -1.3785212855467686, 3.4521661204487, -2.17833929883197, -2.9460513826189043, 0.9759139757882567, -3.564888208991613, 0.31295681692378885, 1.3244631845333439, -0.2686778955331164, 2.996473508866675, -3.52903772952088, -1.766442133485584, -1.6754544979353865, -3.7632161573868013, -1.8689165792232618, -0.8891557032591502, 0.3518247163700474, -2.1505333830946407, 0.5664964988988537, 2.8749860656351736, -2.7321930867721367, 2.579679381027713, 0.727473820270415, 1.4711412579418983, -3.267490666545802, -3.2471909776954497, -2.0645430598383108, 0.9957211222013882, -0.2783156727522602, -2.114504012474514, 1.1543046319859256, -1.0827238585053545, -2.6513275300751493, -1.2569745027937298, 3.2579815548586666, -0.23056874065780164, 1.2630747408028071, -0.8985999466522818, -0.5432570811612116, -2.61089568292787, -0.7536883647102712, 3.545771144414058, -2.9464245524403907, 2.9793384151881392, -3.1133545872363815, -3.643258412440356, 2.1609146804434998, 3.096179385186658, -3.4607984948768875, -0.1777928384804337, 2.1438684836595296, -2.0345062227291395, -2.427287038216379, -0.5296754998810185, 0.4584062195075722, -2.848354291237274, -2.8616316387649983, 3.3550108027948786, 0.2459667918946069, -2.5439150762722154, -3.148291446457389, -1.7748051591885812, 1.2371451452478626, -3.717753196329589, 2.876790889540893, -2.058577870027552, -3.978215843696767, -1.3018368449329065, 0.9404248237103445, 0.5017004467239303, -1.3537285085551813, 1.1791542837720232, -2.9114827068973668, -3.947046512218871, -0.09327507144341407, -3.087687064994129, -1.6863643318155175, -1.1712083903045727, 3.386070727749841, -1.2066928600476645, 1.097204119863, -3.6776494821493797, -3.225639052523266, 0.2551028223525158, -1.404137769729572, -2.0465013847830305, -2.341786619813729, 0.7391038905871641, -0.13284042090040682, 0.6270349185370696, 1.6589639361526203, 1.3469499498155297, 2.8835159162449724, 0.315599146443013, 3.9913915825369903, -1.8655241255185198, -3.7742126606714583, -3.525298403811541, -2.568198125181972, 2.9721116959780316, 3.366795390843839, -0.05827279747026726, -3.6918510930553294, 2.7009013105252055]
    //[-0.7046262569758266, 1.1364862358698442, 2.3793413009686812, -3.1934555620698983, -2.0469951077492032, 1.2821773801538328, -0.6954823446647556, 0.7557527848749981, -3.7314738844435924, -1.246931183599206, -2.5731321330889383, 1.2142076400319937, 0.8922089296541582, -3.0021035349837, -0.06951104541249364, 2.937727130800549, -3.6840215379790715, 0.3872136212284758, 0.5467347970238166, -1.8971114366383661, 3.9408157082385964, 3.3128323521038316, -0.060779901288791294, 3.707675803804662, -0.25425303349770356, -0.5523024024699916, -3.6481049862516555, -3.616533356114436, -0.2756940641807555, -1.5035147972704639, -1.2511674754470397, 3.0874748126589227, -2.5925799705365007, 0.4028866575932035, -2.4487901053250276, 2.622234312057892, -0.5854786426679226, -0.10441430623651105, -2.309272827897761, 1.3212726136503568, -0.418308844134625, 0.18004693039408703, 0.7141148140028939, -2.174384860167181, -2.728883470451742, -1.3695531342953329, -2.9192823744419343, 3.1106029856678017, 0.4102272422629163, 1.832101370265038, -0.7603324377713276, -1.7527738607347532, 3.3975741819617733, 2.445584083410467, 0.8323869639247468, -0.3642214088344442, 1.1509568741667442, 2.0817505813958608, -1.2187534656453574, 1.6478168943081286, 3.627759792834997, -1.7192653172778263, -0.7274473419764487, -1.3098125455814902, 0.3488110088302774, -1.1613776292270872, -0.610993450627002, -0.7909871171582266, -0.9654335060755468, -3.7829178296413897, -1.5218280730986171, 0.4340790954785687, -2.9560697269235128, 1.09616896944636, -3.086783487075346, -3.932261386067183, 3.0424683860351927, -1.055676330804526, -3.755907612298058, -3.886416832663543, -0.054724593160926815, -2.5427550627442628, -1.858205344793678, -2.93064127959882, -2.7532956155329478, -1.77218711881636, 3.4577313941187438, 1.3426632867187092, 0.2017158514231676, -0.7023723404179822, -2.2145858440634605, 3.7506279274580336, -2.0170185639234077, 1.0599414691958824, 2.0121489083065462, -3.026316308538733, 3.3359759991677143, -3.2630585489648514, -3.1352091261863126, 0.20606598000093523, 2.2611616095078455, 2.4867500278350763, -0.17229533491172777, -2.8849720373314653, -0.5712833097247323, -2.4647627859103354, -3.277599867518136, -1.7789120891304808, -1.2738774089708311, -1.8336775784650055, -1.725575246861541, 3.8755662305603744, 2.758969677505932, 2.0716188017361974, 3.990054634257854, 0.5651787748779089, -1.573098178826089, -0.06706894291828824, -0.6490965983304031, 1.3286442805007734, 3.403559978175177, 3.4825043568330223, -0.25199307204563137, 1.5558546956996615, 2.473899509031707, -3.8376690848943147, 1.6517713532922578, 1.7856911922356495, -3.9851622486973692, -0.5437098547475632, -0.8806781810441002, -2.399356804016225, 2.393287154012574, 3.277231957013578, 2.2886002940645795, -3.125264806855391, -3.072724351998496, 3.624320207763814, -2.126385264785931, 2.9266929838578646, -3.481495988005725, 3.9335612793646275, 0.959150739770184, -3.9322086126991245, -1.6488463287163775, 3.3110525399041224, -3.6790079286928172, -1.22977238062587, 0.46093044823183416, -0.770111823918608, 0.7013995358321905, -0.8764032691145172, -2.2488578143564144, -0.44992847221100885, -3.3642638065568695, 0.016553858428817847, 2.7950949917195267, -3.662965141131954, -2.1337541071074444, -3.100659340006345, 0.8000048210545225, -2.866407588378218, 2.833985828328421, -3.9958173303959033, 3.630191640041371, -3.7584373364248425, 1.988714055868435, -0.9026577491726897, 3.479384001304, -0.9665082159771723, -1.3661563807420283, -1.8923352957102342, 3.5150871473029923, -1.3368701145501376, -2.946929232865368, 1.246088881619487, -0.4811673600378068, 3.393192680682584, 3.132057342022107, -3.0618649537640454, -0.19938041771740966, 3.942032697091645, 2.014076620080586, -0.7622258427828497, 3.047480431932083, -2.497408124274018, 2.0952164631714334, 1.3555045778122805, 0.1906484801793633, 0.37868754173404273, -0.999077625335957, 1.6239445007275286, -2.723723242997507, -2.4116774309665097, -1.2690412839864376, -0.2937208969182681, -0.29628238130684537, -0.614512009508422, -3.3624133567146917, 2.3463940007954633, 2.704469298999377, -3.844489916016686, -0.7984142424733438, -0.5484587288831113, 0.3617541443807646, 0.22502792570187768, 0.018429445000752942, -0.4469653969318612, -3.9281777090707566, 3.604424146180434, 0.8175085143485674, 1.3998180626594774, 0.11775068886561701, -1.4461386449599996, -0.7213043279935709, -1.0877446880227302, -3.4582247605633993, 3.5038765718013813, -0.3826843823931503, 0.8648609804431624, 1.4526210231895753, 0.3543134700085986, 2.1500565890075487, 2.0953275017303516, -3.047933613194566, -0.5641517880825173, 3.1695059251898083, 3.093049284135051, -2.2677602890228696, 1.9035661195166984, -2.10952667237708, -2.155277428918626, -0.29289960776269375, -1.60994008764278, -1.0727872514345913, 1.7337112681222662, -1.3189390639600802, -1.4777311095853456, -0.27885604198654956, -3.3907148486296483, -2.335657773003624, -2.0153210826737284, 1.9985694857688907, -1.8355126553420504, -0.8971841238091072, -3.922007696766383, 0.04062214572619993, 1.6868437276714712, 1.6893243910189666, 1.988623511630652, -1.8035756175888489, 0.12419276637570142, 0.13104241879983203, -1.0014274725609376, -1.9672519142281688]

    //Sick snake turns both ways for food:
    //[-2.258131676743763, -2.69524879362056, 1.2244921270471698, -1.4329989071096172, 1.1569928852192275, 3.750319863166583, -2.9277039369600173, 1.0768890028946814, -3.3451593360541203, -3.446681495016529, -1.1148277914599056, 1.207124257003655, -0.9302215639705009, -3.893742705543045, -1.3101713084189406, 1.2103220235039007, 1.4544226303092183, 2.816944331166752, -0.7518715120085853, -2.204913354260566, -1.5963009525391252, 1.5590612147857312, -3.7595274311404863, -1.8664974863323547, 3.3924208029950407, 1.98981100155582, 0.6671732310792358, 3.176999628893043, 0.04025842449459027, -0.5373801771057316, -0.6964492583678084, -3.376180495431841, -0.7485569699849322, -0.17679388670753138, 2.461252533345861, 2.6781176316620012, 1.5964349309493366, 2.2717857329310363, 0.6628450577207277, 1.256694587959653, -2.743659330869905, -1.0617138094796994, 2.6420341277017165, -0.6058496657987131, -0.5011212161745862, -3.4191571699988215, 1.6141301171452884, -0.6616064420853762, -1.2129165986255401, -2.7193387035466134, -2.375059614219974, 0.2703914625200232, -0.6328785118362017, 3.7708233697295404, 2.533331309215403, 0.11411663368795733, 2.6412208243957886, 1.9483901677240922, -0.49898744218780067, -2.0469594147344754, 3.8134074612852755, 1.6959979254382223, 0.27401833169408807, -2.980829439570245, -1.353541293399891, 2.0252535468367387, 0.04308386567416189, 1.2666836214866386, 1.7553360587109443, -2.0898445354260113, 0.8065643843796817, -0.18503407401489902, 0.38631059458125794, -1.9312986434228367, 2.385506168139761, 1.787028934179756, 1.48484477028303, -2.5033921311651612, 0.056174971739274326, 2.7078002179530047, 1.0704730805033122, 2.6796624517637655, -1.148681322539125, -0.5723567770912421, -2.262977182584983, -0.1966019822622762, 0.4931138285380685, 0.9683114223961748, -3.862655530432188, 1.5552304174680165, -1.4441054792209647, -3.47272835135925, 2.905344738188707, 0.6075605367845647, -1.5536673431688444, 2.459430418344424, 3.144883602301171, -0.024858315310480883, 1.5565676857001192, -0.24666451983926585, 2.2159256320833354, -3.733159196483994, -2.011574261613096, 0.452743088805839, -1.4817252633918319, 2.5746629332620783, -3.6499275084592284, -1.9875702172535012, -0.1742789201901358, -3.1831810463795636, 0.8888103751212757, -2.3552981339297006, 1.542959071528447, -1.507269038958107, 1.073437959522547, -3.3927197381085863, -0.44058833482254567, -1.505089815200673, 0.45855626026529084, 2.930145132112374, 1.6518946973367976, -1.3411505967023434, 0.3858748973942694, -2.6331173329579247, 2.6439077885613926, 3.3389348839423283, -2.880174756815264, 2.5884946953709624, -0.08496190297855932, -3.82299668030375, -0.7255226244833572, 0.36264614428523956, -0.16132850847265523, -1.890096640929702, 2.688932963914297, -1.2119966523525836, -3.278847103477988, -0.9341603636893101, -3.3708934870055858, 0.2069918330865983, 3.7836720533625217, -1.8503408277695828, 0.16208237333144293, 1.109219870910211, -0.06451460729312153, -3.4174393190456334, 3.1651920244264744, -1.1991360636436257, -2.2137235146930507, -3.469705850811639, 0.8043193301801512, 0.25585658409184653, 3.2038322702563784, -3.3185392291775297, 2.585994089044532, -3.3066092122143136, -0.01789253703193694, -1.753536666091117, -3.967141412557625, -1.4163123723392097, 3.219834137694262, -1.694079782943665, -2.479994024735488, 2.849744636486836, 1.9437447676109212, 1.6413260376304537, 0.9419116562559973, -2.4680487479137048, 0.7161637582714997, 0.6909030862753438, -3.387562383568123, 3.343663216095413, -0.7001091163980435, 2.1713056443898315, 0.7148591260920645, -2.2687604106883867, 2.6543237133482567, -1.3052775048230831, 3.019923055130702, 2.9269615812896683, -3.626189527465405, -2.361465874314427, 1.1696806726923992, 2.4372414920483836, 2.6050119094550714, -0.991961419481636, -3.4199890047358306, -3.447164208507661, -1.9702131622837822, 1.5141905560515276, -3.694371274779333, 0.6528971799003873, -2.6235210211206903, 3.642707034726535, -0.7600370228391844, -2.0079916109158438, 2.193579250126029, -0.07531618359613734, 0.3952436987399608, 3.7917216706401016, -3.692666853312841, 0.7136148478116331, 0.2163146925155326, -2.981364944355618, 3.82098093098164, -2.7646337984605385, -1.9197659340832072, 3.7953548660695855, 1.0094264184473438, -0.37006664212092666, -2.543131434125285, 0.6938469073149927, 0.16099108790421202, 1.5103992966809523, 2.0542330680685454, 2.5568292481129493, -1.4501923457893806, -0.6033180398822768, -3.5555084237556303, 3.086269607731821, -3.733921941045984, -2.191867529663579, 1.2439024144664543, 2.836502383096181, 1.0319374453997572, -2.6300506408301034, 1.1306690501807672, 2.4792959027776194, -3.5975694970209515, -0.31051691682876115, -3.1982828796340748, -3.3084544269912275, 2.6958523882082392, 3.1477260671536254, -1.3712978080940639, 3.964025391302548, -1.2598695493594416, -3.385727589530185, -0.03115465199712908, -0.6226660927772025, -1.3263611936352788, -1.080119482313239, 0.5689615880403398, -3.2931655710063215, 1.5247991845021414, -3.509332585698237, -3.7560880351538533, 0.03148917775477411, 3.6820643754825566, -1.7494498777684306, -1.9626994844268157, -2.4819017401777153, 0.5202469000514922, -3.7103975231426283, 2.011032806948301]

    //Best snake ever: (10653 fitness):
    //[1.5928094036950329, 0.9001733199085038, -1.1778166595800288, -2.2154132113021827, 3.199786638722295, -2.649784614267027, -1.3036860443149463, 2.385204299526394, 3.110701933450092, -0.03719263125500838, -0.5605384798506305, 0.2741991968781585, 1.0120508352228468, 3.500431613089643, 1.8388705151656835, -0.7747724829281628, 2.399639152207775, -2.600050933485739, -3.0175642323600176, -3.6222753118166633, 3.4962232325728833, -1.4183588545020323, -1.6573257998028614, -0.07376271948451585, -2.7341373874298442, 0.9434259848324453, 1.450037909689426, 0.7679938002828299, 0.9117452794192813, -0.9444580798986468, 0.7284600092028466, -1.563318149169735, -1.2193648446967371, -2.3378999551002977, -3.550462871992301, 0.05041489739573812, 2.6354973929644894, 1.9955405049215447, -0.9072809426759605, -2.569015240247782, 1.770538862738423, 2.1017313928346173, 1.659031347187316, -2.8437595762251373, 3.3757705564632623, -3.1374296286561085, 2.4257173710887994, 0.1677686483326699, -1.348479235303035, -3.04357814446674, 2.9566219500650517, -3.030255526876396, -2.863232918891388, 1.1814983382800985, -3.9104515998161338, 0.06251873015248677, -3.6339413498226687, 1.1459709265905733, 3.8945991947371024, 3.6059641549218284, 0.3984290821126182, -3.3898442836905804, -1.455914269722344, 2.2521581920598424, 2.3369947530723305, 2.005742738292719, 0.6772602319853629, 2.2234539635785735, -2.6134340535934415, 3.397972302191816, -2.2269411077779777, 2.7427921499847185, -2.478124606036385, 2.353385844499469, -0.1273657207382657, 3.132084901041, 3.3721614640191904, -3.3946844808013665, -1.3305047450066771, 1.6332078038338818, 0.6374626129445522, 0.7407042043023377, -2.5317558190045464, 0.32565776898620946, 1.1588854632204884, -0.7604680463389002, 1.3916201229283818, 1.6901790790220268, 2.229654250620678, -3.3836587759039443, 3.626059868265636, -3.9477290861247294, -0.2495182109667402, -2.7945479055854845, -2.5103372144694305, -3.1871823947183113, 2.9929770428114413, 0.5537488716386605, -0.9772472613761316, -0.8495491766296528, 3.594205887359845, 3.776194782695404, -0.4327684605302382, -0.8459789911619984, 0.06391267076674634, 2.0343295793922085, 2.7061743423266007, -0.22473821050635845, 0.6545502903994533, -2.9032503824076326, -3.2628848079521102, 3.643889645021817, 1.7774934824518285, -0.12948915383039594, -3.775398052938068, -2.901975555635536, -0.11968878533017335, 2.786354211503019, -1.4317283756287331, 1.8356957419494186, 2.7821831681924767, -1.1791081912095986, 0.9281045916846553, 1.1753383264649262, 1.3356288382266461, -0.11989328830279611, -1.3138609153484762, 2.1987326601933823, -3.459079523534748, 3.1115417044731553, -0.705325896244962, -1.717694124599329, -1.34789743408247, -1.9271965273459042, -3.5429758615910325, -0.37005025062565533, -0.22122999061555415, -2.4396168389683135, 1.4527502685724638, -1.6553786438615923, 2.224953206563149, 2.5369297467444003, 2.919003892418064, 1.029515768385994, -0.35487199608494, -2.6899628415690415, 2.8009769999917253, -0.7328870362777904, 0.38665416376705775, 2.027127072402381, 0.5189772900307563, -3.6761451018638587, 1.9721409564222006, -0.22374693356215314, -2.922088565960319, -1.2764041244729656, -3.275011636608312, -0.31206316416323343, -3.2848130335917842, -0.453183365882845, 0.7223852534575776, -3.5541670922338193, 2.7998587078407944, 3.1961056770778304, -1.7978922798966002, 1.9177698310078846, 2.957164230547593, 3.4306655734531164, -3.1825650306203492, 2.6014749977589773, 0.17570594890647584, 3.4585698550919313, -2.20744998120381, 0.3472969139915465, 2.1648818933524865, 0.13510554324173274, -1.5954139394259625, -0.8963849084057891, -3.540525380663066, 0.33710588790516205, 3.4300471140131563, 0.49714760852008233, -0.34889238177191917, 1.5298209274413672, -1.3210605301343934, -1.6799867013969783, 0.32743321302902917, -1.9815931799954827, -3.6721853682963257, 3.715228369459102, 2.9671126425169083, 1.9290823290494377, 1.7299386337649016, -3.7400063862512765, -3.8290064021271766, -1.9406877779708713, -0.18095831306505872, -0.05125357178896017, 2.441057062944525, -3.1656427976215857, -0.11096002762351187, 0.0307099126856194, -3.7324589786494906, -3.349388595972128, -3.2896748636993873, 1.2241727145300825, 0.415736281215092, -3.329466069272182, 0.6532741325762679, -3.97829299520492, -2.087438487206441, 3.598368845295023, -1.2432370515066058, 2.896691032216803, -3.686730962288971, 2.3555023187261606, -3.936267879352809, 1.7159386553827387, -2.784576871683284, 1.6430254927990138, -2.677105817238515, 2.8455268102427302, -2.239017922048574, -1.8571635696897921, -3.1291747173420967, 0.06430745525159498, -2.2854754508677084, -1.6361690175278971, 0.7876071443159063, 2.58475680207314, 0.6315090687231555, -2.2726444362842653, 0.26360085154116586, -2.246136427189354, 2.979091418656081, 1.6044080796704643, 2.60096396436463, -0.9802727196478687, -3.606047218540165, -0.555057294600827, -2.712423025390529, 0.599260858035767, -3.0207381914533267, 0.13560784270256132, 3.1494010683993316, 1.7192539935895832, -3.818040148454526, -2.5477149863471187, 1.1272711414350036, 0.31624804067564316, 3.686868339929248, 3.2779379171026024, -2.9708725207919997, -3.720595135891047, 0.6880576742921862]

    //Epic snake avoids wall, looks for food on the left, and dodges it's tail
    //[3.5477025690374306, 0.08561099442811404, 0.7545914907723628, 1.6424842396717665, -0.11817228260579249, -3.1743638346633904, -3.223488776626036, 3.7621853092071733, 1.1309535454415416, -0.2499848475216444, -2.7626258776962827, -0.9125229564630146, 2.401419010740038, -2.1727421746822753, -0.7298179744679771, -1.6110078495307754, -1.2179933215055634, -1.3089129958673569, 0.6943443949539487, -3.722015294826667, 3.81117175697326, 0.35835138882010753, 3.2214681031478056, -3.456130556954684, 3.9219859526514522, -3.8020042987660343, 1.409800406608328, 3.6780940738972685, -1.767930099005678, 2.6837215647737844, 3.2630664859678493, 3.131430358307293, 3.5483100552816884, -2.114293086795798, -0.936787838731524, 2.4360763379170223, -3.4507622576907693, 0.248139711962593, -2.991439650076443, -3.177375079750913, -1.2437945318420924, -3.6428890255102093, -1.5553482265551377, 0.7025347976449687, -3.675679783687573, -1.3093974627752178, 0.1726101546865788, -2.3130396612588937, 3.119990814331987, 3.823498006170073, -3.103513718752576, -2.7131307593477354, -2.409649876336416, 1.559173481078421, -3.5587065982578894, -1.386106266196376, 0.031038136253149773, 0.7913570795401421, -3.5005509701114415, 2.8094476941528486, 1.9762204770835279, 1.5454742505948058, -3.5760330105235294, -2.526229252251256, -3.006770488407531, 1.248931252669533, -3.3704361554165345, 1.439049375639887, -0.09181092703993343, -3.3231963224473278, 3.267896761516898, 2.043068131268191, 3.253029616653766, 0.6674678580156135, -0.10187563853762516, -2.6372536514582707, 3.422117305247336, 2.3807700033839847, 1.0222310708665079, 0.1652214170414128, -1.774854486129013, 2.3463453000219374, 0.09860666564754617, -3.6364819978374765, -0.013092267813953562, 3.6780164215164826, 2.228925970399138, -2.7224574118845215, -2.3819448496005613, 1.2461196960677565, 3.184676878039709, 0.6189077852998865, 0.8608779019671555, 1.2453923001706597, 1.446188963994726, 3.4286467309256548, -2.73418623540225, -2.3401149786675193, 1.764629841859028, -1.8100567942404746, -3.870005369805904, 3.8038884404506037, 0.5550775446701639, -2.4641463383467066, -0.4137683694970482, -1.499127030447167, 0.6282617686119814, 3.0263954907200405, -0.9105475115044035, 2.2789920779687867, -1.9013641586951655, -1.1885376879195855, 3.776006425913721, -0.6852901427283111, -1.4527707200266704, -2.4792567082888137, -2.7302208117722913, 2.760665667237812, 0.4674039054815289, 0.2285766502078026, -0.372220925793183, -1.7686914076372995, 0.9419304942810243, 1.7500357531325204, 0.8517271310486221, -0.14692269017235926, 0.40409559224173464, -1.360073780766931, 1.6609488676240138, -3.9316109843179277, -2.5179948122300857, 2.8227463080059243, -2.005766563542945, -3.244382666982802, -1.9230215803336081, 3.582079038800112, 1.8553893284726248, 0.30955622339485434, 3.152585010242932, 0.32049840230305104, -0.7337387726101117, 3.686814167336239, -3.3331206318384456, -3.0695371525486586, -1.5788549189300083, 0.5713152497562719, -0.492466347936217, 1.2759281422378939, -3.084342588941385, 2.8922467843553035, 1.5191838774706916, -3.3482605709659463, 0.15551778968254926, 2.015572495526553, -3.4858323698278433, 0.3921050300795983, 0.6178874651894102, 0.9676946252687983, -2.1499810296073916, 1.9552451869431149, -2.538236129859331, -2.273013340055628, 0.03954460143194183, 1.601518693669795, -2.4906618203953874, -3.930684745072883, -3.261765171090481, 1.1237503430398634, -0.9804412678608818, -2.964075076726158, -1.8760478145368378, 1.675762364393754, -2.3089554575579347, -3.850261527641319, -1.631664979822455, -2.8550723603974273, 2.346902619253367, 3.0207929276564345, -3.6374096560047153, 0.21448876103288317, -3.848687654539039, 0.37150211474770867, 0.20797368296844265, 3.9666180330477703, 1.4428747152983137, -2.725761367225764, 3.821495843899892, -1.8740700988164898, -0.9154070182403595, 1.7748692643899107, 0.23778654144522626, -2.9259701251816974, -3.6649367713100833, 0.9869845487633553, 0.6822471644401551, -2.31741407945296, 1.1236437387030112, 0.3956865593892589, -1.548746885997736, 2.9956717402556583, 2.9082974539750976, 1.4205873622804353, -0.6640315945053956, 2.2717868647513484, -3.3229172921909518, -1.2919029653508014, 2.6096868239081683, 2.1898894678525025, 1.7858702252396599, -3.72389008601285, -0.6632617212842984, 1.347080592743799, -1.436801455732569, -0.7034030123494039, 2.0660591139220124, 0.9365564924628744, -1.3208121408912268, -2.723681747578646, 3.606927917585648, -2.1580386994926153, -2.841800866226677, -3.419951979145373, -0.4495048546746654, 3.245028374262496, -0.5811420329959738, 3.1654094645074498, 0.5580996980698654, 2.9073899985031826, 0.17365022595657287, 0.5701182592630909, 1.4434508062427769, -0.6565856478247891, 2.6893205353732608, 2.451470708516272, 3.8010123869514736, 3.5583200897909526, 0.9654205808182361, -2.149484273183523, 2.3644098724771014, -0.7969389613122182, -1.0641034894279162, 2.975675699075536, 2.434435025189262, -3.2836594370187084, -0.8069348953644493, -2.658000511108443, -2.680865445580542, -3.710496049741403, 0.41520917975513516, 1.3550481825866356, -2.5244028100521447, -0.42225509595671085, 1.3772698122712965, -1.5133687401140117, -0.6808896496933095]

    public static final int VIEW_DISTANCE = 5;
    public static final int INIT_LENGTH = 3;
    public static final int MAX_HEALTH = 200;

    private boolean alive;
    private int age;
    private int health;
    private ArrayList<Double> dna;
    private Brain brain;
    private ArrayList<SnakeSegment> segments;
    private Board board;
    private StandardBrainView brainView;

    public Snake(Board board, int startX, int startY, ArrayList<Double> dna) {
        this.alive = true;
        this.age = 0;
        this.health = MAX_HEALTH;
        this.dna = dna;
        this.brain = new Brain(NeuronSnake.BRAIN_DIMENSIONS, dna);
        this.segments = new ArrayList<>();
        for (int i = 0; i < INIT_LENGTH; i++) {
            segments.add(new SnakeSegment(startX + i, startY, SnakeSegment.Direction.LEFT));
        }
        this.board = board;
    }

    public void move() {
        if (alive) {
            age++;
            health--;

            //Move all the segments forward
            for (SnakeSegment segment : segments) {
                segment.move();
            }
            SnakeSegment.Direction lastSegmentDirection = segments.get(segments.size() - 1).getDirection();
            //Set the direction of a segment to the direction of the segment in front of it.
            for (int i = segments.size() - 1; i > 0; i--) {
                segments.get(i).setDirection(segments.get(i - 1).getDirection());
            }

            //Eat food with the head (first segment)
            if (board.eatFood(segments.get(0).getX(), segments.get(0).getY())) {
                //Add a segment at the end of the tail
                switch (lastSegmentDirection) {
                    case LEFT:
                        segments.add(new SnakeSegment(segments.get(segments.size() - 1).getX() + 1, segments.get(segments.size() - 1).getY(), lastSegmentDirection));
                        break;
                    case RIGHT:
                        segments.add(new SnakeSegment(segments.get(segments.size() - 1).getX() - 1, segments.get(segments.size() - 1).getY(), lastSegmentDirection));
                        break;
                    case UP:
                        segments.add(new SnakeSegment(segments.get(segments.size() - 1).getX(), segments.get(segments.size() - 1).getY() + 1, lastSegmentDirection));
                        break;
                    case DOWN:
                        segments.add(new SnakeSegment(segments.get(segments.size() - 1).getX(), segments.get(segments.size() - 1).getY() - 1, lastSegmentDirection));
                        break;

                }
                //Refresh the snake's health
                health = MAX_HEALTH;
            }

            //Check if the snake died
            if (health <= 0) {
                alive = false;
            } else if (segments.get(0).getX() < 0 || segments.get(0).getX() >= board.getWidth() ||
                    segments.get(0).getY() < 0 || segments.get(0).getY() >= board.getHeight()) {
                alive = false;
            } else {
                for (int i = 1; i < segments.size(); i++) {
                    if (segments.get(0).getX() == segments.get(i).getX() && segments.get(0).getY() == segments.get(i).getY()) {
                        alive = false;
                        break;
                    }
                }
            }
        }
    }

    public void adjustDirection() {
        ArrayList<Double> decision = brain.think(look());
        if (decision.get(0) > 0.5 && decision.get(1) < 0.5) {
            turnRight();
            health--;
        } else if (decision.get(1) > 0.5 && decision.get(0) < 0.5) {
            turnLeft();
            health--;
        }

        if (brainView != null) {
            brainView.draw(brain);
        }
    }

    private void turnRight() {
        switch (segments.get(0).getDirection()) {
            case UP:
                segments.get(0).setDirection(SnakeSegment.Direction.RIGHT);
                break;
            case DOWN:
                segments.get(0).setDirection(SnakeSegment.Direction.LEFT);
                break;
            case LEFT:
                segments.get(0).setDirection(SnakeSegment.Direction.UP);
                break;
            case RIGHT:
                segments.get(0).setDirection(SnakeSegment.Direction.DOWN);
                break;
        }
    }

    private void turnLeft() {
        switch (segments.get(0).getDirection()) {
            case UP:
                segments.get(0).setDirection(SnakeSegment.Direction.LEFT);
                break;
            case DOWN:
                segments.get(0).setDirection(SnakeSegment.Direction.RIGHT);
                break;
            case LEFT:
                segments.get(0).setDirection(SnakeSegment.Direction.DOWN);
                break;
            case RIGHT:
                segments.get(0).setDirection(SnakeSegment.Direction.UP);
                break;
        }
    }

    private ArrayList<Double> look() {
        ArrayList<Double> result = new ArrayList<>();

        //Get the location of the head of the snake
        int headX = segments.get(0).getX();
        int headY = segments.get(0).getY();

        //Look into the possible directions for objects
        for (SnakeViewLine viewLine : SnakeView.getViewLinesByDirection(segments.get(0).getDirection())) {
            //Look for food
            double neuronValue = 0.0;
            for (int i = 1; i <= VIEW_DISTANCE; i++) {
                if (board.isThereFoodAt(headX + i * viewLine.getXDistance(), headY + i * viewLine.getYDistance())) {
                    neuronValue = (double)(VIEW_DISTANCE - i + 1) / (double)(VIEW_DISTANCE);
                    break;
                }
            }
            result.add(neuronValue);

            //Look for itself
            neuronValue = 0.0;
            for (int i = 1; i <= VIEW_DISTANCE; i++) {
                for (SnakeSegment segment : segments) {
                    if (segment.getX() == headX + i * viewLine.getXDistance() && segment.getY() == headY + i * viewLine.getYDistance()) {
                        neuronValue = (double)(VIEW_DISTANCE - i + 1) / (double)(VIEW_DISTANCE);
                        break;
                    }
                }
            }
            result.add(neuronValue);

            //Look for wall
            neuronValue = 0.0;
            for (int i = 1; i <= VIEW_DISTANCE; i++) {
                if (headX + i * viewLine.getXDistance() < 0 || headX + i * viewLine.getXDistance() >= board.getWidth() ||
                        headY + i * viewLine.getYDistance() < 0 || headY + i * viewLine.getYDistance() >= board.getHeight()) {
                    neuronValue = (double)(VIEW_DISTANCE - i + 1) / (double)(VIEW_DISTANCE);
                    break;
                }
            }
            result.add(neuronValue);
        }
        return result;
    }

    public int getHeadX() {
        return segments.get(0).getX();
    }

    public int getHeadY() {
        return segments.get(0).getY();
    }

    public void openBrainView() {
        System.out.println("Selected Snake's DNA: " + dna);
        brainView = new StandardBrainView(brain);
        Platform.runLater(new Runnable() {
            public void run() {
                try {
                    brainView.start(new Stage());
                    brainView.draw(brain);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    public boolean isAlive() {
        return alive;
    }

    public int getFitness() {
        return 20 * segments.size() + age;
    }

    public ArrayList<Double> getDna() {
        return dna;
    }

    public ArrayList<SnakeSegment> getSegments() {
        return segments;
    }
}